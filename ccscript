#!/bin/sh

script="$1"
shift
if ! [ -f "${script}" ]; then
    echo "\"${script}\" - file not found" >&2
    exit 1
fi
base="$(basename "${script}" .cc)"

clang++ -O3 -pedantic -Wall -Wextra ${CXXFLAGS} -c -emit-llvm -o - "${script}" | lli -O3 --fake-argv0="${base}" - "$@"
